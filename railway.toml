# Railway config for second OpenClaw instance (gateway + Telegram only)
# https://docs.railway.app/reference/config-as-code

[build]
builder = "nixpacks"
# buildCommand left default: npm install (or pnpm if lockfile present)

[deploy]
# Must run in shell so PORT is expanded; normalize to digits (Railway may pass PORT oddly)
startCommand = "sh -c 'P=\"${PORT:-8080}\"; P=$(echo \"$P\" | tr -cd 0-9); [ -z \"$P\" ] && P=8080; exec npx openclaw gateway --port \"$P\" --bind lan --allow-unconfigured'"
healthcheckPath = "/health"
healthcheckTimeout = 90
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 5
